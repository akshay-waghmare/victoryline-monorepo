/**
 * Mixins
 * Reusable style patterns and responsive breakpoints
 */

@import 'variables';

// ============================================================================
// RESPONSIVE BREAKPOINT MIXINS
// ============================================================================

// Mobile (< 600px)
@mixin mobile {
  @media (max-width: ($breakpoint-sm - 1)) {
    @content;
  }
}

// Tablet (600px - 959px)
@mixin tablet {
  @media (min-width: $breakpoint-sm) and (max-width: ($breakpoint-md - 1)) {
    @content;
  }
}

// Desktop (>= 960px)
@mixin desktop {
  @media (min-width: $breakpoint-md) {
    @content;
  }
}

// Large Desktop (>= 1280px)
@mixin large-desktop {
  @media (min-width: $breakpoint-lg) {
    @content;
  }
}

// Extra Large Desktop (>= 1920px)
@mixin xl-desktop {
  @media (min-width: $breakpoint-xl) {
    @content;
  }
}

// Mobile and Tablet (< 960px)
@mixin mobile-tablet {
  @media (max-width: ($breakpoint-md - 1)) {
    @content;
  }
}

// Tablet and Desktop (>= 600px)
@mixin tablet-desktop {
  @media (min-width: $breakpoint-sm) {
    @content;
  }
}

// ============================================================================
// CARD MIXIN
// ============================================================================

@mixin card($padding: $spacing-md, $radius: $border-radius-lg) {
  background: var(--color-background-elevated);
  border: 1px solid var(--color-border);
  border-radius: $radius;
  padding: $padding;
  box-shadow: $shadow-md;
  transition: transform $duration-normal $ease-in-out,
              box-shadow $duration-normal $ease-in-out;

  &:hover {
    transform: translateY(-4px);
    box-shadow: $shadow-lg;
  }
}

// ============================================================================
// BUTTON RESET MIXIN
// ============================================================================

@mixin button-reset {
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  font: inherit;
  color: inherit;
  cursor: pointer;
  outline: none;

  &:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
}

// ============================================================================
// TRUNCATE TEXT MIXIN
// ============================================================================

@mixin truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// ============================================================================
// LINE CLAMP MIXIN
// ============================================================================

@mixin line-clamp($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

// ============================================================================
// FOCUS VISIBLE MIXIN
// ============================================================================

@mixin focus-visible($color: var(--color-primary), $offset: 2px) {
  &:focus-visible {
    outline: 2px solid $color;
    outline-offset: $offset;
  }

  &:focus:not(:focus-visible) {
    outline: none;
  }
}

// ============================================================================
// ABSOLUTE CENTER MIXIN
// ============================================================================

@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// ============================================================================
// FLEX CENTER MIXIN
// ============================================================================

@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

// ============================================================================
// ASPECT RATIO MIXIN
// ============================================================================

@mixin aspect-ratio($width, $height) {
  position: relative;
  
  &::before {
    content: '';
    display: block;
    padding-top: ($height / $width) * 100%;
  }

  > * {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
}

// ============================================================================
// SCROLLBAR STYLING MIXIN
// ============================================================================

@mixin custom-scrollbar(
  $track-color: var(--color-background-hover),
  $thumb-color: var(--color-border),
  $thumb-hover-color: var(--color-text-disabled)
) {
  &::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  &::-webkit-scrollbar-track {
    background: $track-color;
  }

  &::-webkit-scrollbar-thumb {
    background: $thumb-color;
    border-radius: $border-radius-full;

    &:hover {
      background: $thumb-hover-color;
    }
  }

  // Firefox
  scrollbar-width: thin;
  scrollbar-color: $thumb-color $track-color;
}

// ============================================================================
// SKELETON LOADER MIXIN
// ============================================================================

@mixin skeleton-loader {
  background: linear-gradient(
    90deg,
    var(--color-background-elevated) 0%,
    var(--color-background-hover) 50%,
    var(--color-background-elevated) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: $border-radius-sm;

  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }
}

// ============================================================================
// HOVER LIFT EFFECT MIXIN
// ============================================================================

@mixin hover-lift($lift-distance: -4px, $shadow-start: $shadow-md, $shadow-end: $shadow-lg) {
  transition: transform $duration-normal $ease-in-out,
              box-shadow $duration-normal $ease-in-out;
  box-shadow: $shadow-start;

  &:hover {
    transform: translateY($lift-distance);
    box-shadow: $shadow-end;
  }

  &:active {
    transform: translateY(0);
  }
}

// ============================================================================
// GRADIENT TEXT MIXIN
// ============================================================================

@mixin gradient-text($gradient) {
  background: $gradient;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

// ============================================================================
// SAFE AREA INSETS (for iOS notch support)
// ============================================================================

@mixin safe-area-top($property: padding-top, $fallback: 0) {
  #{$property}: $fallback;
  #{$property}: max($fallback, env(safe-area-inset-top));
}

@mixin safe-area-bottom($property: padding-bottom, $fallback: 0) {
  #{$property}: $fallback;
  #{$property}: max($fallback, env(safe-area-inset-bottom));
}

@mixin safe-area-left($property: padding-left, $fallback: 0) {
  #{$property}: $fallback;
  #{$property}: max($fallback, env(safe-area-inset-left));
}

@mixin safe-area-right($property: padding-right, $fallback: 0) {
  #{$property}: $fallback;
  #{$property}: max($fallback, env(safe-area-inset-right));
}
