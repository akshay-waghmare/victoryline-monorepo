<!-- 
  Navbar Component Template
  Task: T046 - Add theme toggle button with Material Design icon
-->

<nav class="navbar">
  <div class="navbar__container">
    
    <!-- Logo/Brand -->
    <div class="navbar__brand" (click)="navigateTo('/')">
      <img
        class="navbar__logo-wordmark"
        src="/assets/img/branding_logo-txt.png"
        alt="VictoryLine"
        [ngStyle]="{ filter: logoFilter }"
      />
    </div>
    
    <!-- Desktop Navigation -->
    <div class="navbar__nav-desktop">
      <a
        *ngFor="let link of navLinks"
        class="navbar__nav-link"
        [class.navbar__nav-link--active]="isRouteActive(link.route, link.exact)"
        (click)="navigateTo(link.route)"
        [routerLink]="link.route"
        routerLinkActive="navbar__nav-link--active"
        [routerLinkActiveOptions]="{ exact: link.exact }"
        [attr.aria-current]="isRouteActive(link.route, link.exact) ? 'page' : null"
      >
        <mat-icon class="navbar__nav-icon">{{ link.icon }}</mat-icon>
        <span>{{ link.label }}</span>
      </a>
    </div>
    
    <!-- Actions -->
    <div class="navbar__actions">
      
      <!-- Theme Toggle Button (T046) -->
      <button 
        mat-icon-button 
        class="navbar__theme-toggle"
        (click)="toggleTheme()"
        [attr.aria-label]="themeTooltip"
        [matTooltip]="themeTooltip"
        matTooltipPosition="below"
      >
        <mat-icon [attr.aria-hidden]="true">{{ themeIcon }}</mat-icon>
      </button>
      
      <!-- Mobile Menu Toggle (T061) -->
      <button 
        mat-icon-button 
        class="navbar__mobile-toggle"
        (click)="toggleMobileMenu()"
        aria-label="Toggle navigation menu"
        [attr.aria-expanded]="isMobileMenuOpen"
      >
        <mat-icon>{{ isMobileMenuOpen ? 'close' : 'menu' }}</mat-icon>
      </button>
    </div>
  </div>
  
  <app-mobile-nav
    [open]="isMobileMenuOpen"
    [links]="navLinks"
    [activeRoute]="activeRoute"
    (navigate)="handleMobileNavigate($event)"
    (close)="closeMobileMenu()"
  ></app-mobile-nav>
</nav>
