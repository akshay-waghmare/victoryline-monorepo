<div class="discovery-root">
  <div class="discovery-header">
    <h2>Discover Matches</h2>
    <app-search 
      (search)="onSearch($event)"
      (suggestionSelected)="onSuggestionSelected($event)"
    ></app-search>
  </div>

  <div class="filters-row">
    <label>
      <select [(ngModel)]="filters.type" (change)="applyFilters()">
        <option value="all">All</option>
        <option value="live">Live</option>
        <option value="upcoming">Upcoming</option>
        <option value="completed">Completed</option>
      </select>
    </label>
    <button (click)="applyFilters()" class="apply-btn">Apply Filters</button>
  </div>

  <!-- Recently Viewed Section -->
  <section class="content-section" *ngIf="recentlyViewed.length > 0">
    <div class="section-header">
      <h3>Recently Viewed</h3>
      <button class="clear-btn" (click)="clearHistory()">Clear</button>
    </div>
    <ul class="match-list horizontal">
      <li *ngFor="let m of recentlyViewed" class="match-item compact" (click)="onMatchClick(m)">
        <div class="match-header">
          <span class="status-badge" [style.background-color]="m.statusColor">{{m.displayStatus}}</span>
        </div>
        <div class="teams-compact">
          <div class="team-name">{{m.team1?.name || 'Team 1'}}</div>
          <div class="vs-small">vs</div>
          <div class="team-name">{{m.team2?.name || 'Team 2'}}</div>
        </div>
      </li>
    </ul>
  </section>

  <!-- Recommended Section -->
  <section class="content-section" *ngIf="recommended.length > 0">
    <div class="section-header">
      <h3>Recommended for You</h3>
    </div>
    <ul class="match-list">
      <li *ngFor="let m of recommended" class="match-item" [class.live]="m.isLive" (click)="onMatchClick(m)">
        <div class="match-header">
          <span class="status-badge" [style.background-color]="m.statusColor">{{m.displayStatus}}</span>
          <span class="venue">{{m.venue}}</span>
        </div>
        <div class="teams">
          <div class="team">
            <span class="team-name">{{m.team1?.name || 'Team 1'}}</span>
            <span class="score" *ngIf="m.team1?.score">{{m.team1.score.runs}}/{{m.team1.score.wickets}} ({{m.team1.score.overs}})</span>
          </div>
          <div class="vs">vs</div>
          <div class="team">
            <span class="team-name">{{m.team2?.name || 'Team 2'}}</span>
            <span class="score" *ngIf="m.team2?.score">{{m.team2.score.runs}}/{{m.team2.score.wickets}} ({{m.team2.score.overs}})</span>
          </div>
        </div>
        <div class="match-footer">
          <span class="time-display">{{m.timeDisplay}}</span>
        </div>
      </li>
    </ul>
  </section>

  <!-- All Matches Section -->
  <section class="content-section">
    <div class="section-header">
      <h3>All Matches</h3>
    </div>
    
    <div class="results" *ngIf="!loading">
      <div *ngIf="matches.length === 0" class="empty">No matches found</div>
      <ul class="match-list">
        <li *ngFor="let m of matches" class="match-item" [class.live]="m.isLive" (click)="onMatchClick(m)">
          <div class="match-header">
            <span class="status-badge" [style.background-color]="m.statusColor">{{m.displayStatus}}</span>
            <span class="venue">{{m.venue}}</span>
          </div>
          <div class="teams">
            <div class="team">
              <span class="team-name">{{m.team1?.name || 'Team 1'}}</span>
              <span class="score" *ngIf="m.team1?.score">{{m.team1.score.runs}}/{{m.team1.score.wickets}} ({{m.team1.score.overs}})</span>
            </div>
            <div class="vs">vs</div>
            <div class="team">
              <span class="team-name">{{m.team2?.name || 'Team 2'}}</span>
              <span class="score" *ngIf="m.team2?.score">{{m.team2.score.runs}}/{{m.team2.score.wickets}} ({{m.team2.score.overs}})</span>
            </div>
          </div>
          <div class="match-footer">
            <span class="time-display">{{m.timeDisplay}}</span>
          </div>
        </li>
      </ul>
    </div>

    <div class="loading" *ngIf="loading">Loading matchesâ€¦</div>
  </section>
</div>
