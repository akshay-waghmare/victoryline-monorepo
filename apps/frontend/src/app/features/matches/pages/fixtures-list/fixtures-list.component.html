<div class="fixtures-container">
  <!-- Header -->
  <div class="fixtures-header">
    <h1 class="page-title">
      <mat-icon>schedule</mat-icon>
      Upcoming Cricket Fixtures
    </h1>
    <p class="page-description">Browse all scheduled cricket matches</p>
  </div>

  <!-- Filters and Search -->
  <div class="filters-section">
    <mat-form-field class="search-field">
      <mat-icon matPrefix>search</mat-icon>
      <input 
        matInput 
        placeholder="Search fixtures..." 
        [(ngModel)]="searchQuery"
        (input)="onSearchChange($event.target.value)"
      >
      <button mat-icon-button matSuffix *ngIf="searchQuery" (click)="searchQuery = ''; onSearchChange('')">
        <mat-icon>clear</mat-icon>
      </button>
    </mat-form-field>

    <mat-form-field class="status-filter">
      <mat-label>Status</mat-label>
      <mat-select [(ngModel)]="selectedStatus" (selectionChange)="onStatusChange()">
        <mat-option *ngFor="let option of statusOptions" [value]="option.value">
          {{ option.label }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <button mat-raised-button color="primary" (click)="onRefresh()" class="refresh-btn">
      <mat-icon>refresh</mat-icon>
      Refresh
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Loading fixtures...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="hasError && !isLoading" class="error-container">
    <mat-icon>error_outline</mat-icon>
    <h3>{{ errorMessage }}</h3>
    <button mat-raised-button color="primary" (click)="onRefresh()">
      Try Again
    </button>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && !hasError && filteredFixtures.length === 0" class="empty-container">
    <mat-icon>event_busy</mat-icon>
    <h3>No fixtures found</h3>
    <p *ngIf="searchQuery">Try adjusting your search query</p>
    <p *ngIf="!searchQuery && selectedStatus !== 'all'">Try changing the status filter</p>
  </div>

  <!-- Fixtures Grid -->
  <div *ngIf="!isLoading && !hasError && filteredFixtures.length > 0" class="fixtures-grid">
    <mat-card 
      *ngFor="let fixture of filteredFixtures; trackBy: trackByFixtureId" 
      class="fixture-card"
      [class.upcoming-soon]="isUpcomingSoon(fixture.startTime)"
    >
      <!-- Match Header -->
      <div class="fixture-header">
        <div class="series-info">
          <mat-icon class="series-icon">emoji_events</mat-icon>
          <span class="series-name">{{ fixture.seriesName }}</span>
        </div>
        <span class="status-badge" [ngClass]="getStatusClass(fixture.status)">
          {{ fixture.status }}
        </span>
      </div>

      <!-- Teams Section -->
      <div class="teams-section">
        <div class="team">
          <div class="team-name">{{ fixture.teamA.name }}</div>
          <div class="team-code" *ngIf="fixture.teamA.code">{{ fixture.teamA.code }}</div>
        </div>
        
        <div class="vs-divider">
          <span>vs</span>
        </div>
        
        <div class="team">
          <div class="team-name">{{ fixture.teamB.name }}</div>
          <div class="team-code" *ngIf="fixture.teamB.code">{{ fixture.teamB.code }}</div>
        </div>
      </div>

      <!-- Match Title -->
      <div class="match-title">
        <mat-icon>sports_cricket</mat-icon>
        {{ fixture.matchTitle }}
      </div>

      <!-- Match Info -->
      <div class="match-info">
        <!-- Date and Time -->
        <div class="info-row">
          <mat-icon>event</mat-icon>
          <div class="info-content">
            <div class="info-label">Date & Time</div>
            <div class="info-value">{{ formatDateTime(fixture.startTime) }}</div>
          </div>
        </div>

        <!-- Time Until Match -->
        <div class="info-row time-until" *ngIf="fixture.status === 'scheduled'">
          <mat-icon>schedule</mat-icon>
          <div class="info-content">
            <div class="info-label">Starts</div>
            <div class="info-value time-countdown">{{ getTimeUntilMatch(fixture.startTime) }}</div>
          </div>
        </div>

        <!-- Venue -->
        <div class="info-row" *ngIf="fixture.venue">
          <mat-icon>location_on</mat-icon>
          <div class="info-content">
            <div class="info-label">Venue</div>
            <div class="info-value">
              {{ fixture.venue.name }}
              <span *ngIf="fixture.venue.city">, {{ fixture.venue.city }}</span>
              <span *ngIf="fixture.venue.country">, {{ fixture.venue.country }}</span>
            </div>
          </div>
        </div>

        <!-- Notes -->
        <div class="info-row" *ngIf="fixture.notes">
          <mat-icon>info</mat-icon>
          <div class="info-content">
            <div class="info-value notes">{{ fixture.notes }}</div>
          </div>
        </div>
      </div>

      <!-- Card Actions -->
      <mat-card-actions class="card-actions">
        <button mat-button color="primary">
          <mat-icon>notifications_active</mat-icon>
          Set Reminder
        </button>
        <button mat-button>
          <mat-icon>share</mat-icon>
          Share
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <!-- Results Summary -->
  <div *ngIf="!isLoading && !hasError && filteredFixtures.length > 0" class="results-summary">
    <p>
      Showing {{ filteredFixtures.length }} of {{ totalItems }} fixture{{ totalItems !== 1 ? 's' : '' }}
    </p>
  </div>
</div>
