# ====================================
# VictoryLine Production Docker Environment
# ====================================
# Copy this file to .env before running docker-compose.prod.yml
# Update secrets (passwords, tokens, URLs) before deploying to production

# ====================================
# Docker Images
# v1.0.0 - SEO Optimization Release
# v1.0.1 - Live Match Glance UI Enhancements (Responsive Design, Chase Summary, Current Ball)
# v1.1.0 - Scraper Resilience (Automatic Restart, Memory Limits, Monitoring)
# v1.1.2 - Periodic Container Restart (fixes thread/PID leak)
# v1.1.3 - localStorage Timing Fix (complete player data extraction, 100% scorecard coverage)
# v1.1.4 - Scraper Resilience Fix (PID limit increase, process cleanup, staleness threshold adjustment)
# v1.2.0 - SEO Fix (dynamic canonical, meta tags, match result persistence)
# ====================================
MYSQL_IMAGE=mysql:8.0
BACKEND_IMAGE=macubex/victoryline-backend:v1.0.0
FRONTEND_IMAGE=victoryline-monorepo-frontend:v1.2.0
SCRAPER_IMAGE=macubex/victoryline-scraper:v1.1.4
PRERENDER_IMAGE=macubex/victoryline-prerender:v1.0.0

# ====================================
# MySQL Database Configuration (COMMENTED OUT - Using H2 instead)
# ====================================
# MYSQL_ROOT_PASSWORD=VictoryLine2025!Root@MySQL
# MYSQL_DATABASE=cricket_db
# MYSQL_USER=cricket_user
# MYSQL_PASSWORD=Cricket2025!User@Pass
# MYSQL_PORT=3306

# ====================================
# Backend (Spring Boot) Configuration
# ====================================
BACKEND_PORT=8099
SPRING_PROFILES_ACTIVE=prod
# Using H2 Embedded Database
SPRING_DATASOURCE_USERNAME=sa
SPRING_DATASOURCE_PASSWORD=
SPRING_DATASOURCE_URL=jdbc:h2:file:/app/data/victoryline;DB_CLOSE_ON_EXIT=FALSE
SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.h2.Driver
SPRING_JPA_DATABASE_PLATFORM=org.hibernate.dialect.H2Dialect
SPRING_JPA_HIBERNATE_DDL_AUTO=update
SPRING_H2_CONSOLE_ENABLED=true
SPRING_H2_CONSOLE_PATH=/h2-console
SHOW_SQL=false

# JWT Configuration
JWT_SECRET=VictoryLineJWT2025SecureKeyForAuthenticationAndAuthorization!@#$
JWT_EXPIRATION=86400

# ====================================
# Frontend (Angular) Configuration
# ====================================
FRONTEND_PORT=4007
NODE_VERSION=16.20.2
API_URL=http://backend:8099

# ====================================
# Scraper (Python Flask) Configuration
# ====================================
SCRAPER_PORT=5000
TOKEN_URL=http://backend:8099/token/generate-token
SERVICE_URL=http://backend:8099/cricket-data
ADD_LIVE_MATCHES_URL=http://backend:8099/cricket-data/add-live-matches
API_ENDPOINT=http://backend:8099/cricket-data/match-info/save
API_ENDPOINT_SC4=http://backend:8099/cricket-data/sC4-stats/save
FLASK_ENV=production
FLASK_DEBUG=0
PLAYWRIGHT_HEADLESS=true

# Resilience Features (004-scraper-resilience)
SCRAPER_MAX_LIFETIME_HOURS=6
MEMORY_SOFT_LIMIT_MB=1536
MEMORY_HARD_LIMIT_MB=2048
POLLING_INTERVAL_SECONDS=2.5
POLLING_MIN_SECONDS=2
POLLING_BREAK_SECONDS=30
PAGE_TIMEOUT_SECONDS=30
ENABLE_PROMETHEUS_METRICS=true
PROMETHEUS_PORT=9090
STALENESS_THRESHOLD_SECONDS=60
CONTAINER_RESTART_INTERVAL_MINUTES=10

# ====================================
# Prerender Service Configuration
# ====================================
PRERENDER_PORT=9100

# ====================================
# Caddy Reverse Proxy Configuration
# ====================================
LETSENCRYPT_EMAIL=akshay.d.waghmare@gmail.com

# ====================================
# Docker Engine
# ====================================
# DOCKER_BUILDKIT=1
# COMPOSE_DOCKER_CLI_BUILD=1
